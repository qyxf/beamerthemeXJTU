% beamerthemeXJTU.sty v1.0.0
%
% Copyright (C)
%     2011 -- 2018, multiple1902 (Weisi Dai) <multiple1902@gmail.com>
%     2019 -- present, xjtu-blackmsith <yjr134@163.com>
% ----------------------------------------------------------------------
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either
% version 1.3c of this license or (at your option) any later
% version. This version of this license is in
%    http://www.latex-project.org/lppl/lppl-1-3c.txt
% and the latest version of this license is in
%    http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of
% LaTeX version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is xjtu-blacksmith.
%
% ----------------------------------------------------------------------
%

\ProvidesPackage{beamerthemeXJTU}

\newif\if@blue
\@bluefalse
\DeclareOption{blue}{\@bluetrue}
\ProcessOptions

\RequirePackage{cncolours}

\usetheme{Rochester}
\useinnertheme{circles}
\if@blue
  \definecolor{西交蓝}{HTML}{005699}
  \usecolortheme[named=西交蓝]{structure}
  \def\headerimage{inc/XJTU-header-blue.png}
\else
  \usecolortheme[named=酡红]{structure}
  \def\headerimage{inc/XJTU-header.png}
\fi

\RequirePackage{pgf}
\pgfdeclareimage[width=\paperwidth,height=.13\paperwidth]{XJTU-header}{\headerimage}
\pgfdeclareimage[width=\paperwidth,height=\paperheight]{background}{inc/background}

\setbeamertemplate{navigation symbols}{}

\setbeamercovered{transparent}

\beamer@headheight=.13\paperwidth

\setbeamerfont*{title}{series=\bfseries,size=\Huge}
\if@blue
  \setbeamercolor*{title}{fg=荼白,bg=西交蓝}
  \setbeamercolor*{Title bar}{fg=雪白,bg=藏青}
  \setbeamercolor*{Location bar}{fg=雪白,bg=藏青}
  \setbeamercolor*{frametitle}{parent=Title bar}
  \setbeamercolor*{block title}{bg=藏青,fg=铅白}
  \setbeamercolor*{block body}{bg=霜色,fg=玄青}
  \setbeamercolor*{block title example}{bg=苍白,fg=正青}
  \setbeamercolor*{block body example}{bg=莹白,fg=墨色}
  \setbeamercolor*{block title alerted}{bg=酡红,fg=象牙白}
  \setbeamercolor*{block body alerted}{bg=鱼肚白,fg=赤}
  \setbeamercolor*{example text}{fg=群青}
  \setbeamercolor{section in head/foot}{fg=素}
\else
  \setbeamercolor*{title}{fg=鸭黄,bg=酡红}
  \setbeamercolor*{Title bar}{fg=鸭黄,bg=酡红}
  \setbeamercolor*{Location bar}{fg=鸭黄,bg=酡红}
  \setbeamercolor*{frametitle}{parent=Title bar}
  \setbeamercolor*{block title}{bg=酡红,fg=象牙白}
  \setbeamercolor*{block body}{bg=鱼肚白,fg=黑色}
  \setbeamercolor*{block title example}{bg=粉红,fg=乌黑}
  \setbeamercolor*{block body example}{bg=鱼肚白,fg=黑色}
  \setbeamercolor*{block title alerted}{bg=鹅黄,fg=大红}
  \setbeamercolor*{block body alerted}{bg=鸭黄,fg=酡红}
  \setbeamercolor{example text}{fg=茜色}
  \setbeamercolor{section in head/foot}{fg=鸭黄}
\fi
\setbeamercolor*{normal text}{fg=黑色,bg=铅白}


\setbeamerfont{block title}{series=\bfseries}
\setbeamerfont{section in head/foot}{size=\tiny,series=\bfseries}
\setbeamerfont{frametitle}{size=\Large}

\usebackgroundtemplate{\pgfuseimage{background}}

\setbeamertemplate{section in toc}[circle]
\setbeamertemplate{subsection in toc}[square]

\setbeamertemplate{headline}
{
  \pgfuseimage{XJTU-header}
  \linethickness{0pt}
}

\setbeamertemplate{frametitle}
{
  \ifx\insertframesubtitle\@empty
    \vskip-.7\beamer@headheight
    \hskip1.2em\usebeamerfont*{frametitle}\textbf{\insertframetitle}
  \else
    \vskip-.9\beamer@headheight
    \hskip1.2em\usebeamerfont*{frametitle}\textbf{\insertframetitle}\\[-2pt]
    \hskip1.25em\usebeamerfont*{framesubtitle}\textbf{\insertframesubtitle}
  \fi
}

\setbeamertemplate{footline}
{
  \linethickness{0pt}
  \framelatex{
  \begin{beamercolorbox}[leftskip=.3cm,wd=\paperwidth,ht=0.28\beamer@headheight,sep=0.1cm]{Location bar}
    \usebeamerfont{section in head/foot}%
    \insertauthor~$\cdot$~\inserttitle
    \hfill
    \insertframenumber{} / \inserttotalframenumber
  \end{beamercolorbox}}
}
